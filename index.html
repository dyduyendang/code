<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
        <link rel="stylesheet" href="gallery.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Xử lý click cho menu chính và submenu
            const menuLinks = document.querySelectorAll('.menu a');
            
            menuLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    // Chỉ prevent default nếu không có href hoặc href là #
                    if (!href || href === '#' || href === '') {
                        e.preventDefault();
                    } else {
                        // Có URL thực, cho phép chuyển hướng và không thêm active
                        return;
                    }
                    
                    // Remove active class from all links
                    menuLinks.forEach(l => l.classList.remove('active'));
                    
                    // Add active class to clicked link
                    this.classList.add('active');
                    
                    // Nếu click vào submenu item, giữ dropdown menu visible
                    if (this.closest('.sub-menu')) {
                        const parentLink = this.closest('li').querySelector('a');
                        parentLink.classList.add('active');
                    }
                });
            });
        });
    </script>
</head>
<body>
    <header>
        <div class="logo">
                <img src="images/logo.png">
        </div>
        <div class="menu">
            <li>
                <a href="/nu">NỮ</a>
                <ul class="sub-menu">
                    <li><a href="/nu/ao">Áo</a></li>
                    <li><a href="/nu/quan">Quần</a></li>
                    <li><a href="/nu/vay">Váy</a></li>
                    <li><a href="/nu/phu-kien">Phụ kiện</a></li>
                </ul>
            </li>
            <li>
                <a href="/nam">NAM</a>
                <ul class="sub-menu">
                    <li><a href="/nam/ao">Áo</a></li>
                    <li><a href="/nam/quan">Quần</a></li>
                    <li><a href="/nam/giay">Giày</a></li>
                    <li><a href="/nam/phu-kien">Phụ kiện</a></li>
                </ul>
            </li>
            <li>
                <a href="/tre-em">TRẺ EM</a>
                <ul class="sub-menu">
                    <li><a href="/tre-em/ao">Áo</a></li>
                    <li><a href="/tre-em/quan">Quần</a></li>
                    <li><a href="/tre-em/do-bo">Đồ bộ</a></li>
                    <li><a href="/tre-em/phu-kien">Phụ kiện</a></li>
                </ul>
            </li>
            <li>
                <a href="/sale">SALE</a>
                <ul class="sub-menu">
                    <li><a href="/sale/50">Sale 50%</a></li>
                    <li><a href="/sale/30">Sale 30%</a></li>
                    <li><a href="/sale/clearance">Clearance</a></li>
                </ul>
            </li>
            <li>
                <a href="/khau-trang">KHẨU TRANG</a>
                <ul class="sub-menu">
                    <li><a href="/khau-trang/vai">Khẩu trang vải</a></li>
                    <li><a href="/khau-trang/y-te">Khẩu trang y tế</a></li>
                </ul>
            </li>
            <li>
                <a href="/bo-suu-tap">BỘ SƯU TẬP</a>
                <ul class="sub-menu">
                    <li><a href="/bo-suu-tap/xuan-he">Xuân Hè</a></li>
                    <li><a href="/bo-suu-tap/thu-dong">Thu Đông</a></li>
                    <li><a href="/bo-suu-tap/limited">Limited Edition</a></li>
                </ul>
            </li>
            <li>
                <a href="/thong-tin">THÔNG TIN</a>
                <ul class="sub-menu">
                    <li><a href="/thong-tin/ve-chung-toi">Về chúng tôi</a></li>
                    <li><a href="/thong-tin/lien-he">Liên hệ</a></li>
                    <li><a href="/thong-tin/chinh-sach">Chính sách</a></li>
                </ul>
            </li>
        </div>
        <div class="other">
                <li class="search-container">
                    <input id="product-search" type="text" placeholder="Tìm kiếm..." autocomplete="off">
                    <i id="search-btn" class="fas fa-search" title="Tìm kiếm"></i>
                    <i id="clear-search" class="fas fa-times" title="Xóa" style="display:none;margin-left:8px;color:#666;cursor:pointer"></i>

                    <div class="search-suggestions" role="listbox" aria-label="Gợi ý tìm kiếm">
                        <button class="suggestion" data-keyword="Đầm">Đầm</button>
                        <button class="suggestion" data-keyword="trễ vai">trễ vai</button>
                        <button class="suggestion" data-keyword="Áo khoác">Áo khoác</button>
                        <button class="suggestion" data-keyword="Quần">Quần</button>
                        <button class="suggestion" data-keyword="Áo sơ mi">Áo sơ mi</button>
                        <button class="suggestion" data-keyword="Vest">Vest</button>
                        <button class="suggestion" data-keyword="parka">parka</button>
                        <button class="suggestion" data-keyword="tweed">tweed</button>
                        <button class="suggestion" data-keyword="croptop">croptop</button>
                        <button class="suggestion" data-keyword="Chân váy">Chân váy</button>
                        <button class="suggestion" data-keyword="lông cừu">lông cừu</button>
                    </div>
                </li>
                <div class="icon-container">
                    <li>
                        <a href="#" class="paw-icon" onclick="handlePawClick()">
                            <i class="fas fa-paw"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="user-icon" onclick="handleUserClick()">
                            <i class="fas fa-user"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="cart-icon cart-count" onclick="handleCartClick()">
                            <i class="fas fa-shopping-bag"></i>
                        </a>
                    </li>
                </div>
        </div>
    </header>    
    
    </section>
    <section class="slider">
        <div class="slider-inner">
            <div class="slider-content">
                <div class="slide active">
                    <div class="aspect-ratio-169">
                        <img src="images/slider1.jpg" alt="Slider 1">
                    </div>
                    
                </div>
                <div class="slide">
                    <div class="aspect-ratio-169">
                        <img src="images/slider2.jpg" alt="Slider 2">
                    </div>
                    
                    
                </div>
                <div class="slide">
                    <div class="aspect-ratio-169">
                        <img src="images/slider3.jpg" alt="Slider 3">
                    </div>
                    
                </div>
            </div>

            <button class="prev-btn"><i class="fas fa-chevron-left"></i></button>
            <button class="next-btn"><i class="fas fa-chevron-right"></i></button>

            <div class="slider-dots">
                <span class="dot active"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>
        </div>
    </section>

    <section class="new-arrival">
        <div class="container">
            <h2 class="na-heading">NEW ARRIVAL</h2>
            <div class="na-tabs">
                <button class="tab active">IVY moda</button>
                <button class="tab">Metagent</button>
            </div>

            <div class="products-grid">
                <!-- product cards -->
                <article class="product-card" data-url="product1.html">
                        <div class="product-image">
                            <span class="badge">NEW</span>
                            <button class="wish-btn" aria-label="Yêu thích"><i class="fas fa-heart"></i></button>
                            <a class="product-link" href="product1.html"><img src="images/slider1.jpg" alt="Chân Váy Bút Chì Elegant Bloom"></a>
                            <button class="cart-btn" aria-label="Add to cart"><i class="fas fa-shopping-bag"></i></button>
                        </div>
                    <div class="product-meta">
                        <div class="color-dots">
                            <span class="dot" style="background:#8b6ea6"></span>
                            <span class="dot" style="background:#333"></span>
                        </div>
                        <h3 class="product-title"><a href="product1.html">Chân Váy Bút Chì Elegant Bloom</a></h3>
                        <div class="product-price">1.390.000₫</div>
                    </div>
                </article>

                <article class="product-card" data-url="product2.html">
                    <div class="product-image">
                        <span class="badge">NEW</span>
                        <button class="wish-btn" aria-label="Yêu thích"><i class="fas fa-heart"></i></button>
                        <a class="product-link" href="product2.html"><img src="images/slider2.jpg" alt="Đầm Xòe Elegant Simplicity"></a>
                        <button class="cart-btn" aria-label="Add to cart"><i class="fas fa-shopping-bag"></i></button>
                    </div>
                    <div class="product-meta">
                        <div class="color-dots">
                            <span class="dot" style="background:#fff; border:1px solid #ddd"></span>
                        </div>
                        <h3 class="product-title"><a href="product2.html">Đầm Xòe Elegant Simplicity</a></h3>
                        <div class="product-price">1.590.000₫</div>
                    </div>
                </article>

                <article class="product-card" data-url="product3.html">
                    <div class="product-image">
                        <span class="badge">NEW</span>
                        <button class="wish-btn" aria-label="Yêu thích"><i class="fas fa-heart"></i></button>
                        <a class="product-link" href="product3.html"><img src="images/slider3.jpg" alt="Áo Tweed Lilac Elegance"></a>
                        <button class="cart-btn" aria-label="Add to cart"><i class="fas fa-shopping-bag"></i></button>
                    </div>
                    <div class="product-meta">
                        <div class="color-dots">
                            <span class="dot" style="background:#d8cbe0"></span>
                        </div>
                        <h3 class="product-title"><a href="product3.html">Áo Tweed Lilac Elegance</a></h3>
                        <div class="product-price">1.990.000₫</div>
                    </div>
                </article>

                <article class="product-card" data-url="product4.html">
                    <div class="product-image">
                        <span class="badge">NEW</span>
                        <button class="wish-btn" aria-label="Yêu thích"><i class="fas fa-heart"></i></button>
                        <a class="product-link" href="product4.html"><img src="images/slider1.jpg" alt="Quần Tây Ông Suông Adele"></a>
                        <button class="cart-btn" aria-label="Add to cart"><i class="fas fa-shopping-bag"></i></button>
                    </div>
                    <div class="product-meta">
                        <div class="color-dots">
                            <span class="dot" style="background:#333"></span>
                            <span class="dot" style="background:#e9e6df"></span>
                        </div>
                        <h3 class="product-title"><a href="product4.html">Quần Tây Ông Suông Adele</a></h3>
                        <div class="product-price">1.190.000₫</div>
                    </div>
                </article>

                <article class="product-card" data-url="product5.html">
                    <div class="product-image">
                        <span class="badge">NEW</span>
                        <button class="wish-btn" aria-label="Yêu thích"><i class="fas fa-heart"></i></button>
                        <a class="product-link" href="product5.html"><img src="images/slider2.jpg" alt="Áo Thun Dài Tay Basic Chic"></a>
                        <button class="cart-btn" aria-label="Add to cart"><i class="fas fa-shopping-bag"></i></button>
                    </div>
                    <div class="product-meta">
                        <div class="color-dots">
                            <span class="dot" style="background:#333"></span>
                        </div>
                        <h3 class="product-title"><a href="product5.html">Áo Thun Dài Tay Basic Chic</a></h3>
                        <div class="product-price">790.000₫</div>
                    </div>
                </article>
            </div>

            <div class="view-all-wrap">
                <a href="#" class="view-all">Xem tất cả</a>
            </div>
        </div>
    </section>

    <section class="collections">
        <div class="container">
            <h2 class="collections-heading">BỘ SƯU TẬP</h2>
            <div class="season-tabs">
                <button class="season-tab active" data-target="spring">Xuân</button>
                <button class="season-tab" data-target="summer">Hạ</button>
                <button class="season-tab" data-target="autumn">Thu</button>
                <button class="season-tab" data-target="winter">Đông</button>
            </div>

            <div class="season-grids">
                <div id="spring" class="season-grid active">
                    <!-- reuse product-card markup (3 items as example) -->
                        <article class="product-card" data-url="spring-1.html">
                            <div class="product-image"><a class="product-link" href="spring-1.html"><img src="images/slider1.jpg" alt="Xuân - Mẫu 1"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                            <div class="product-meta"><h3 class="product-title"><a href="spring-1.html">Xuân - Mẫu 1</a></h3><div class="product-price">990.000₫</div></div>
                        </article>
                        <article class="product-card" data-url="spring-2.html">
                            <div class="product-image"><a class="product-link" href="spring-2.html"><img src="images/slider2.jpg" alt="Xuân - Mẫu 2"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                            <div class="product-meta"><h3 class="product-title"><a href="spring-2.html">Xuân - Mẫu 2</a></h3><div class="product-price">1.150.000₫</div></div>
                        </article>
                        <article class="product-card" data-url="spring-3.html">
                            <div class="product-image"><a class="product-link" href="spring-3.html"><img src="images/slider3.jpg" alt="Xuân - Mẫu 3"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                            <div class="product-meta"><h3 class="product-title"><a href="spring-3.html">Xuân - Mẫu 3</a></h3><div class="product-price">1.250.000₫</div></div>
                        </article>
                </div>

                <div id="summer" class="season-grid">
                    <article class="product-card" data-url="summer-1.html">
                        <div class="product-image"><a class="product-link" href="summer-1.html"><img src="images/slider2.jpg" alt="Hạ - Mẫu 1"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="summer-1.html">Hạ - Mẫu 1</a></h3><div class="product-price">850.000₫</div></div>
                    </article>
                    <article class="product-card" data-url="summer-2.html">
                        <div class="product-image"><a class="product-link" href="summer-2.html"><img src="images/slider3.jpg" alt="Hạ - Mẫu 2"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="summer-2.html">Hạ - Mẫu 2</a></h3><div class="product-price">1.100.000₫</div></div>
                    </article>
                    <article class="product-card" data-url="summer-3.html">
                        <div class="product-image"><a class="product-link" href="summer-3.html"><img src="images/slider1.jpg" alt="Hạ - Mẫu 3"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="summer-3.html">Hạ - Mẫu 3</a></h3><div class="product-price">920.000₫</div></div>
                    </article>
                </div>

                <div id="autumn" class="season-grid">
                    <article class="product-card" data-url="autumn-1.html">
                        <div class="product-image"><a class="product-link" href="autumn-1.html"><img src="images/slider3.jpg" alt="Thu - Mẫu 1"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="autumn-1.html">Thu - Mẫu 1</a></h3><div class="product-price">1.350.000₫</div></div>
                    </article>
                    <article class="product-card" data-url="autumn-2.html">
                        <div class="product-image"><a class="product-link" href="autumn-2.html"><img src="images/slider1.jpg" alt="Thu - Mẫu 2"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="autumn-2.html">Thu - Mẫu 2</a></h3><div class="product-price">1.450.000₫</div></div>
                    </article>
                    <article class="product-card" data-url="autumn-3.html">
                        <div class="product-image"><a class="product-link" href="autumn-3.html"><img src="images/slider2.jpg" alt="Thu - Mẫu 3"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="autumn-3.html">Thu - Mẫu 3</a></h3><div class="product-price">1.290.000₫</div></div>
                    </article>
                </div>

                <div id="winter" class="season-grid">
                    <article class="product-card" data-url="winter-1.html">
                        <div class="product-image"><a class="product-link" href="winter-1.html"><img src="images/slider1.jpg" alt="Đông - Mẫu 1"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="winter-1.html">Đông - Mẫu 1</a></h3><div class="product-price">1.690.000₫</div></div>
                    </article>
                    <article class="product-card" data-url="winter-2.html">
                        <div class="product-image"><a class="product-link" href="winter-2.html"><img src="images/slider2.jpg" alt="Đông - Mẫu 2"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="winter-2.html">Đông - Mẫu 2</a></h3><div class="product-price">1.590.000₫</div></div>
                    </article>
                    <article class="product-card" data-url="winter-3.html">
                        <div class="product-image"><a class="product-link" href="winter-3.html"><img src="images/slider3.jpg" alt="Đông - Mẫu 3"></a><button class="cart-btn"><i class="fas fa-shopping-bag"></i></button></div>
                        <div class="product-meta"><h3 class="product-title"><a href="winter-3.html">Đông - Mẫu 3</a></h3><div class="product-price">1.790.000₫</div></div>
                    </article>
                </div>
            </div>
        </div>
    </section>
    <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Slider functionality (fade, pause on hover, reset interval on interaction)
                const slides = document.querySelectorAll('.slide');
                const dots = document.querySelectorAll('.dot');
                const prevBtn = document.querySelector('.prev-btn');
                const nextBtn = document.querySelector('.next-btn');
                let currentSlide = 0;
                let slideInterval = null;
                const AUTO_MS = 4500;

                function showSlide(n) {
                    // normalize index
                    const idx = (n + slides.length) % slides.length;
                    slides.forEach((s, i) => {
                        if (i === idx) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                    dots.forEach((d, i) => d.classList.toggle('active', i === idx));
                    currentSlide = idx;
                }

                function nextSlide() { showSlide(currentSlide + 1); }
                function prevSlide() { showSlide(currentSlide - 1); }

                function startAuto() {
                    stopAuto();
                    slideInterval = setInterval(nextSlide, AUTO_MS);
                }

                function stopAuto() {
                    if (slideInterval) { clearInterval(slideInterval); slideInterval = null; }
                }

                prevBtn.addEventListener('click', function() { prevSlide(); startAuto(); });
                nextBtn.addEventListener('click', function() { nextSlide(); startAuto(); });

                dots.forEach((dot, index) => {
                    dot.addEventListener('click', () => { showSlide(index); startAuto(); });
                });

                // pause on hover/focus
                const sliderEl = document.querySelector('.slider');
                sliderEl.addEventListener('mouseenter', stopAuto);
                sliderEl.addEventListener('mouseleave', startAuto);
                sliderEl.addEventListener('focusin', stopAuto);
                sliderEl.addEventListener('focusout', startAuto);

                // initialize
                showSlide(0);
                startAuto();

                // Gallery image hover effect
                const galleryItems = document.querySelectorAll('.gallery-item');
            
                galleryItems.forEach(item => {
                    item.addEventListener('mouseenter', function() {
                        this.querySelector('.gallery-overlay').style.opacity = '1';
                    });
                
                    item.addEventListener('mouseleave', function() {
                        this.querySelector('.gallery-overlay').style.opacity = '0';
                    });
                });

                // Season tabs handling
                const seasonTabs = document.querySelectorAll('.season-tab');
                const seasonGrids = document.querySelectorAll('.season-grid');

                seasonTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        const target = this.getAttribute('data-target');
                        // toggle active tab
                        seasonTabs.forEach(t => t.classList.remove('active'));
                        this.classList.add('active');
                        // show/hide grids
                        seasonGrids.forEach(g => {
                            if (g.id === target) {
                                g.classList.add('active');
                            } else {
                                g.classList.remove('active');
                            }
                        });
                    });
                });

                // Product search (filter product cards and gallery items)
                const searchInput = document.getElementById('product-search');
                const searchBtn = document.getElementById('search-btn');
                const clearBtn = document.getElementById('clear-search');
                const noResultsEl = document.createElement('div');
                noResultsEl.className = 'no-results';
                noResultsEl.style.display = 'none';
                noResultsEl.textContent = 'Không tìm thấy sản phẩm.';
                document.querySelector('.container').appendChild(noResultsEl);

                function getCardText(el) {
                    // try product-title, alt text, or overlay title
                    const title = el.querySelector('.product-title');
                    if (title && title.textContent.trim()) return title.textContent.trim();
                    const img = el.querySelector('img');
                    if (img && img.alt) return img.alt;
                    const overlay = el.querySelector('.gallery-overlay h3');
                    if (overlay) return overlay.textContent.trim();
                    return '';
                }

                function performSearch() {
                    const q = searchInput.value.trim().toLowerCase();
                    const productCards = document.querySelectorAll('.product-card');
                    const galleryItems = document.querySelectorAll('.gallery-item');
                    let shown = 0;

                    if (!q) {
                        // show all
                        productCards.forEach(c => c.style.display = 'flex');
                        galleryItems.forEach(g => g.style.display = 'block');
                        noResultsEl.style.display = 'none';
                        clearBtn.style.display = 'none';
                        return;
                    }

                        productCards.forEach(c => {
                            const text = getCardText(c).toLowerCase();
                            if (text.includes(q)) { c.style.display = 'flex'; shown++; } else { c.style.display = 'none'; }
                        });
                    galleryItems.forEach(g => {
                        const text = getCardText(g).toLowerCase();
                        if (text.includes(q)) { g.style.display = 'block'; shown++; } else { g.style.display = 'none'; }
                    });

                    if (shown === 0) { noResultsEl.style.display = 'block'; } else { noResultsEl.style.display = 'none'; }
                    clearBtn.style.display = 'inline-block';

                    // If there's exactly one product-card visible and it has a data-url, redirect to it when search was triggered by Enter or search button
                    if (shown === 1) {
                        // find visible product card first
                        const visibleCard = Array.from(productCards).find(c => c.style.display !== 'none');
                        if (visibleCard && visibleCard.dataset && visibleCard.dataset.url) {
                            // redirect after a short delay so the user sees the result briefly
                            setTimeout(() => { window.location.href = visibleCard.dataset.url; }, 200);
                        }
                    }
                }

                searchBtn.addEventListener('click', performSearch);
                searchInput.addEventListener('keydown', function(e) { if (e.key === 'Enter') { performSearch(); } });
                
                // Make product cards clickable (navigate to product page), but don't trigger when clicking cart button
                const allProductCards = document.querySelectorAll('.product-card');
                allProductCards.forEach(card => {
                    card.addEventListener('click', function(e) {
                        if (e.target.closest('.cart-btn')) return; // don't navigate when clicking cart
                        const url = card.dataset.url;
                        if (url) window.location.href = url;
                    });
                });
                clearBtn.addEventListener('click', function() { searchInput.value = ''; performSearch(); clearBtn.style.display='none'; searchInput.focus(); });

                // Popular tag clicks: fill input and run search
                const popularTags = document.querySelectorAll('.popular-tag');
                popularTags.forEach(tag => {
                    tag.addEventListener('click', function() {
                        const keyword = this.getAttribute('data-keyword') || this.textContent;
                        searchInput.value = keyword;
                        performSearch();
                    });
                });

                // Suggestions inside search box
                const suggestionButtons = document.querySelectorAll('.search-suggestions .suggestion');
                suggestionButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        const kw = this.getAttribute('data-keyword') || this.textContent;
                        searchInput.value = kw;
                        performSearch();
                    });
                });
            });
    </script>
</body>
</html>
